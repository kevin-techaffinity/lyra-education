(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{3144:function(e){"use strict";var t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports},9192:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/otp",function(){return n(7814)}])},7814:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(5893),r=n(7294),i=n(7041),o=n(1664),c=n.n(o),a=n(5697),l=n.n(a),u=n(3863);function d(e){let{login:t}=e,[n,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(void 0),d=(0,r.useRef)(null);(0,r.useEffect)(()=>(window.document.body.classList.add("login"),window.scrollTo(0,0),()=>{window.document.body.classList.remove("login")}),[]);let f=e=>{let{value:t}=e.target;o(t)},p=async()=>{let e=d.current.reportValidity();if(e)try{l(void 0);let{status:s,token:r}=await (0,u.bz)({msisdn:(0,i.getCookie)("sanitizedMsisdn"),otp:n});if(200!==s){l("Login failed, please try again");return}t(r)}catch(o){console.log(o)}};return(0,s.jsxs)("form",{ref:d,onSubmit:e=>e.preventDefault(),className:a?"error":"",children:[(0,s.jsxs)("svg",{className:"svg__filler",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 429.453 429.453",children:[(0,s.jsx)("circle",{cx:"214.727",cy:"214.727",r:"199.053",className:"fill-primary",fill:"#4dcfe0"}),(0,s.jsxs)("g",{fill:"#363F3D",children:[(0,s.jsx)("path",{d:"M214.727 429.453C96.131 429.453 0 333.322 0 214.727S96.131 0 214.727 0s214.727 96.131 214.727 214.727-96.132 214.726-214.727 214.726zm0-398.106c-101.355 0-183.38 82.024-183.38 183.38s82.024 183.38 183.38 183.38 183.38-82.024 183.38-183.38-82.025-183.38-183.38-183.38z"}),(0,s.jsx)("path",{d:"M287.869 246.073h-83.592c-8.882 0-15.673-6.792-15.673-15.673V120.686c0-8.882 6.792-15.673 15.673-15.673s15.673 6.792 15.673 15.673v94.041h67.918c8.882 0 15.673 6.792 15.673 15.673s-6.79 15.673-15.672 15.673z"})]})]}),(0,s.jsx)("h1",{children:"Enter your OTP"}),(0,s.jsx)("p",{children:"Please enter the OTP sent to your cellphone."}),a&&(0,s.jsx)("div",{className:"flash",children:a}),(0,s.jsx)("input",{type:"text",name:"otp",pattern:"[0-9]*",placeholder:"Enter OTP",inputMode:"numeric",autoComplete:"off","aria-label":"Enter OTP",maxLength:"4",value:n,onChange:f,required:!0}),(0,s.jsx)("input",{type:"submit",value:"Login",onClick:p}),(0,s.jsx)(c(),{href:"/login",children:"Resend OTP"})]})}d.propTypes={login:l().func.isRequired}},3863:function(e,t,n){"use strict";n.d(t,{I5:function(){return o},bz:function(){return c},x4:function(){return i}});var s=n(7041),r=n(1712);let i=async e=>{let{msisdn:t}=e,n=await (0,r.v)({request:"/login",body:{msisdn:t}});return n},o=async e=>{(0,s.setCookie)("token",e,{sameSite:!0,maxAge:31556952,secure:!1})},c=async e=>{let{msisdn:t,otp:n}=e,s=await (0,r.v)({request:"/otp",body:{msisdn:t,otp:n}});return s}},1712:function(e,t,n){"use strict";n.d(t,{U:function(){return o},v:function(){return c}});var s=n(3144),r=n.n(s),i=n(5160);let o=async e=>{let{request:t,params:n,host:s}=e,o=(0,i.Z)(s),c="".concat(o).concat(t,"?").concat(n||""),a=await r()(c,{});return a.json()},c=async e=>{let{request:t,params:n,body:s}=e,o=(0,i.Z)(),c="".concat(o).concat(t,"?").concat(n||""),a=await r()(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return a.json()}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9192)}),_N_E=e.O()}]);