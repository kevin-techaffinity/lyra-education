(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3144:function(e){"use strict";var n=self.fetch.bind(self);e.exports=n,e.exports.default=e.exports},6429:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(4754)}])},4754:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var r=t(5893),s=t(7294),c=t(7041),o=t(1664),i=t.n(o),l=t(1163),a=t(3863);function u(){let[e,n]=(0,s.useState)(""),[t,o]=(0,s.useState)(void 0),u=(0,s.useRef)(null),d=(0,l.useRouter)();(0,s.useEffect)(()=>(window.document.body.classList.add("login"),window.scrollTo(0,0),()=>{window.document.body.classList.remove("login")}),[]);let h=e=>{let{value:t}=e.target;n(t)},f=async()=>{let n=u.current.reportValidity();if(n)try{o(void 0);let t=e.replace(/\s+/g,"").replace(/^0/,"27"),{status:r}=await (0,a.x4)({msisdn:t});if(201!==r){o("An error occurred while sending your OTP. Please try again.");return}(0,c.setCookie)("sanitizedMsisdn",t),d.push("/otp")}catch(s){console.log(s)}};return(0,r.jsxs)("form",{ref:u,onSubmit:e=>e.preventDefault(),className:t?"error":"",children:[(0,r.jsxs)("svg",{className:"svg__filler",viewBox:"0 0 480.653 480.653",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M107.344 76.8h265.927v302.498H107.344z",fill:"#d4e1f4"}),(0,r.jsx)("path",{d:"M373.27 47.02V76.8H107.344V47.02c0-17.241 14.106-31.347 31.347-31.347h203.233c17.24 0 31.346 14.107 31.346 31.347zM373.27 433.633c.522 17.241-13.584 31.347-30.824 31.347H138.691c-17.241 0-31.347-14.106-31.347-31.347v-54.335H373.27z",className:"fill-primary",fill:"#4dcfe0"}),(0,r.jsxs)("g",{fill:"#363F3D",children:[(0,r.jsx)("path",{d:"M341.923 0H138.691c-26.122 0-47.02 20.898-47.02 47.02v386.612c0 26.122 20.898 47.02 47.02 47.02h203.755c12.539 0 24.555-5.224 33.437-14.106s13.584-20.898 13.061-32.914V47.02c0-26.122-20.898-47.02-47.021-47.02zm15.674 363.624h-234.58V92.473h234.58zM138.691 31.347h203.233c8.882 0 15.673 6.792 15.673 15.673v14.106h-234.58V47.02c0-8.881 6.792-15.673 15.674-15.673zm214.726 413.257c-3.135 3.135-6.792 4.702-10.971 4.702H138.691c-8.882 0-15.673-6.792-15.673-15.673v-38.661h234.58v39.184c-.001 3.656-1.569 7.836-4.181 10.448z"}),(0,r.jsx)("path",{d:"M253.629 437.29h-26.122c-8.882 0-15.673-6.792-15.673-15.673s6.792-15.673 15.673-15.673h26.122c8.882 0 15.673 6.792 15.673 15.673s-6.791 15.673-15.673 15.673z"})]})]}),(0,r.jsx)("h1",{children:"Please Log in"}),(0,r.jsxs)("p",{children:["Enter your ",(0,r.jsx)("b",{children:"cellphone number"})," below or switch to your mobile network."]}),t&&(0,r.jsx)("div",{className:"flash",children:t}),(0,r.jsx)("input",{type:"tel",pattern:"(?:^[0-9\\s]{1,9}?$|(?:0|\\+27|27)\\d{2}[\\s-]?\\d{3}[\\s-]?\\d{4})",placeholder:"Cellphone number",autoComplete:"off","aria-label":"Enter your cellphone number",inputMode:"numeric",title:"Please enter valid cellphone number. e.g. 083 xxx xxxx",name:"msisdn",value:e,required:!0,onChange:h}),(0,r.jsx)("input",{type:"submit",value:"Continue",onClick:f}),(0,r.jsx)(i(),{href:"/",children:"Cancel"})]})}},3863:function(e,n,t){"use strict";t.d(n,{I5:function(){return o},bz:function(){return i},x4:function(){return c}});var r=t(7041),s=t(1712);let c=async e=>{let{msisdn:n}=e,t=await (0,s.v)({request:"/login",body:{msisdn:n}});return t},o=async e=>{(0,r.setCookie)("token",e,{sameSite:!0,maxAge:31556952,secure:!1})},i=async e=>{let{msisdn:n,otp:t}=e,r=await (0,s.v)({request:"/otp",body:{msisdn:n,otp:t}});return r}},1712:function(e,n,t){"use strict";t.d(n,{U:function(){return o},v:function(){return i}});var r=t(3144),s=t.n(r),c=t(5160);let o=async e=>{let{request:n,params:t,host:r}=e,o=(0,c.Z)(r),i="".concat(o).concat(n,"?").concat(t||""),l=await s()(i,{});return l.json()},i=async e=>{let{request:n,params:t,body:r}=e,o=(0,c.Z)(),i="".concat(o).concat(n,"?").concat(t||""),l=await s()(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return l.json()}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);